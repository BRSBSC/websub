# websum

一个基于 Chrome Manifest V3 的网页总结插件。  
在 Side Panel 中一键总结当前页面正文，并按所选提示词模板输出中文结果。

## 功能

- 支持配置 OpenAI 兼容接口 `API Base URL + API Key`
- 支持调用 `GET /v1/models` 拉取模型列表
- 拉取失败可手动输入模型名
- 总结当前活动页面（正文优先抽取，最大 12,000 字符）
- 支持 5 个默认提示词模板
  - `TL;DR + 5 要点`
  - `超短版（2 句 + 3 要点）`
  - `详细版（背景/术语）`
  - `详细版（章节拆解）`
  - `详细版（事实/观点）`
- 支持自定义系统提示词（最多 2000 字符）
- 选择自定义模板但提示词为空时，自动回退到上次默认模板
- 总结内容支持 Markdown / GFM 渲染（标题、列表、代码块、表格等）
- 出于安全考虑，Markdown 内嵌原生 HTML 不渲染
- 历史页支持纯文本预览与 Markdown 详情展开
- 自动保存最近 10 条历史记录
- 支持浅色/深色双主题（默认跟随系统，可在设置页手动覆盖）

## 技术栈

- TypeScript
- React
- Vite
- `@crxjs/vite-plugin`

## 本地开发

```bash
npm install
npm run dev
```

## 构建

```bash
npm run build
```

构建产物在 `dist/` 目录。

## Chrome 加载方式

1. 打开 `chrome://extensions`
2. 打开右上角“开发者模式”
3. 点击“加载已解压的扩展程序”
4. 选择项目下的 `dist` 目录

## 使用方式

1. 点击扩展图标打开 Side Panel
2. 在“设置”页填写 `API 地址 / API Key / 模型`
3. 选择“输出提示词模板”，可按需填写自定义系统提示词
4. 可点击“拉取模型”，或直接手动填写模型名
5. 可在“设置”页选择主题（跟随系统/浅色/深色）
6. 回到“总结”页点击“总结当前页面”
7. 在“历史”页查看最近 10 条总结并复制全文（含模板来源）

## 已知限制

- `chrome://`、`chrome-extension://` 等受限页面无法提取正文
- 不同 OpenAI 兼容服务商的返回字段可能有差异
- 首版仅支持 Chrome，不包含 Firefox / Edge 适配
